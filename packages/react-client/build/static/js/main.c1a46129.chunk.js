(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{429:function(e,t,a){e.exports=a(565)},565:function(e,t,a){"use strict";a.r(t);var n=a(38),r=a(0),i=a.n(r),c=a(20),o=a.n(c),s=a(600),l=a(113),m=a(115),u=a(94),d=a(95),p=a(99),g=a(98),f=a(26),h=a.n(f),b=a(41),E=a(23),v=a(4),x=a(587),y=a(602),I=a(588),S=a(405),O=a.n(S),w=a(404),A=a.n(w),P=a(117),j=a(342),T=a(343),k=a(277),N={accessToken:"",email:"",role:"",name:"",id:"",hasBusiness:!1,businessUserId:""},C=function(e){N=e},$=function(){return N},_=a(341),U=a(407),R=a.n(U),B=a(39),L=a(40),z=a.n(L),D=a(25);function F(){var e=Object(B.a)(["\n    query Users {\n  users {\n    id\n    email\n    name\n    firstName\n    lastName\n  }\n}\n    "]);return F=function(){return e},e}function q(){var e=Object(B.a)(["\n    mutation Register($email: String!, $password: String!, $firstName: String!, $lastName: String!, $userType: String!) {\n  register(email: $email, password: $password, firstName: $firstName, lastName: $lastName, userType: $userType)\n}\n    "]);return q=function(){return e},e}function J(){var e=Object(B.a)(["\n    mutation Logout {\n  logout\n}\n    "]);return J=function(){return e},e}function W(){var e=Object(B.a)(["\n    mutation Login($email: String!, $password: String!) {\n  login(email: $email, password: $password) {\n    id\n    email\n    role\n    accessToken\n    name\n    hasBusiness\n    businessUserId\n  }\n}\n    "]);return W=function(){return e},e}function V(){var e=Object(B.a)(["\n    query Products($partnerId: String!) {\n  products(partnerId: $partnerId) {\n    id\n    name\n    price\n    description\n    createdAt\n    partner {\n      id\n      clientId\n      name\n    }\n  }\n}\n    "]);return V=function(){return e},e}function Y(){var e=Object(B.a)(["\n    mutation CreateProduct($partnerId: String!, $name: String!, $price: Float!, $description: String!) {\n  createProduct(partnerId: $partnerId, name: $name, price: $price, description: $description) {\n    id\n    name\n    price\n    description\n    createdAt\n    partner {\n      id\n      clientId\n      name\n    }\n  }\n}\n    "]);return Y=function(){return e},e}function G(){var e=Object(B.a)(["\n    query Posts {\n  posts {\n    id\n    title\n    postType\n    description\n    createdAt\n    videoUrl\n    user {\n      email\n      name\n    }\n  }\n}\n    "]);return G=function(){return e},e}function M(){var e=Object(B.a)(["\n    mutation CreatePost($userId: String!, $postType: String!, $title: String!, $description: String!, $videoUrl: String!) {\n  createPost(userId: $userId, postType: $postType, title: $title, description: $description, videoUrl: $videoUrl) {\n    id\n    title\n    postType\n    description\n    createdAt\n    videoUrl\n    user {\n      email\n      name\n    }\n  }\n}\n    "]);return M=function(){return e},e}function K(){var e=Object(B.a)(["\n    query Partner {\n  partners {\n    id\n    name\n    emails\n    partnerId\n    createdAt\n    payerId\n    clientId\n    verifiedAccount\n    user {\n      email\n      name\n    }\n  }\n}\n    "]);return K=function(){return e},e}function X(){var e=Object(B.a)(["\n    query PartnerDetail($id: String!) {\n  partner(id: $id) {\n    id\n    name\n    emails\n    partnerId\n    createdAt\n    payerId\n    clientId\n    verifiedAccount\n    user {\n      email\n      name\n    }\n  }\n}\n    "]);return X=function(){return e},e}function H(){var e=Object(B.a)(["\n    mutation CreatePartner($userId: String!, $name: String!, $emails: String!, $partnerId: String!, $payerId: String!, $clientId: String!, $verifiedAccount: String!) {\n  createPartner(userId: $userId, name: $name, emails: $emails, partnerId: $partnerId, payerId: $payerId, clientId: $clientId, verifiedAccount: $verifiedAccount) {\n    id\n    name\n    emails\n    partnerId\n    createdAt\n    payerId\n    clientId\n    verifiedAccount\n    user {\n      email\n      name\n    }\n  }\n}\n    "]);return H=function(){return e},e}function Q(){var e=Object(B.a)(["\n    query Orders($partnerId: String!) {\n  orders(partnerId: $partnerId) {\n    id\n    name\n    price\n    description\n    createdAt\n    customer {\n      id\n      name\n    }\n    products {\n      id\n      name\n      partner {\n        id\n        name\n      }\n    }\n  }\n}\n    "]);return Q=function(){return e},e}function Z(){var e=Object(B.a)(["\n    mutation CreateOrder($partnerId: String!, $customerId: String!, $productIds: String!, $name: String!, $price: Float!, $description: String!) {\n  createOrder(payerId: $partnerId, customerId: $customerId, productIds: $productIds, name: $name, price: $price, description: $description) {\n    id\n    name\n    price\n    description\n    createdAt\n    customer {\n      id\n      name\n    }\n    products {\n      id\n      name\n      partner {\n        id\n        name\n      }\n    }\n  }\n}\n    "]);return Z=function(){return e},e}function ee(){var e=Object(B.a)(["\n    query Customers {\n  customers {\n    id\n    name\n    emails\n    customerId\n    createdAt\n    payerId\n    verifiedAccount\n    user {\n      email\n      name\n    }\n  }\n}\n    "]);return ee=function(){return e},e}function te(){var e=Object(B.a)(["\n    query CustomerDetail($id: String!) {\n  customer(id: $id) {\n    id\n    name\n    emails\n    customerId\n    createdAt\n    payerId\n    verifiedAccount\n    user {\n      email\n      name\n    }\n  }\n}\n    "]);return te=function(){return e},e}function ae(){var e=Object(B.a)(["\n    mutation CreateCustomer($userId: String!, $name: String!, $emails: String!, $customerId: String!, $payerId: String!, $clientId: String!, $verifiedAccount: String!) {\n  createCustomer(userId: $userId, name: $name, emails: $emails, customerId: $customerId, payerId: $payerId, verifiedAccount: $verifiedAccount) {\n    id\n    name\n    emails\n    customerId\n    createdAt\n    payerId\n    verifiedAccount\n    user {\n      email\n      name\n    }\n  }\n}\n    "]);return ae=function(){return e},e}function ne(){var e=Object(B.a)(["\n    mutation RemoveCarts($ids: String!) {\n  removeCarts(ids: $ids)\n}\n    "]);return ne=function(){return e},e}function re(){var e=Object(B.a)(["\n    mutation CreateCart($partnerId: String!, $customerId: String!, $productId: String!, $name: String!, $price: Float!, $description: String!) {\n  createCart(partnerId: $partnerId, customerId: $customerId, productId: $productId, name: $name, price: $price, description: $description) {\n    id\n    name\n    price\n    description\n    createdAt\n    partner {\n      id\n      clientId\n      name\n    }\n    customer {\n      id\n      name\n    }\n    product {\n      id\n      name\n    }\n  }\n}\n    "]);return re=function(){return e},e}function ie(){var e=Object(B.a)(["\n    query Carts($customerId: String!) {\n  carts(customerId: $customerId) {\n    id\n    name\n    price\n    description\n    createdAt\n    partner {\n      id\n      clientId\n      name\n    }\n    customer {\n      id\n      name\n    }\n    product {\n      id\n      name\n    }\n  }\n}\n    "]);return ie=function(){return e},e}var ce=z()(ie());var oe=z()(re());var se=z()(ne());z()(ae());var le=z()(te());z()(ee());var me=z()(Z());var ue=z()(Q());var de=z()(H());var pe=z()(X());z()(K());var ge=z()(M());var fe=z()(G());function he(e){return D.c(fe,e)}var be=z()(Y());var Ee=z()(V());function ve(e){return D.c(Ee,e)}var xe=z()(W());var ye=z()(J());var Ie=z()(q());function Se(e){return D.b(Ie,e)}var Oe=z()(F());var we=function(e){var t,a=D.b(ye,t),n=Object(E.a)(a,2),r=n[0],c=n[1].client;return i.a.createElement(_.a,{onClick:Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r();case 2:C({id:"",accessToken:"",email:"",role:"",name:"",businessUserId:"",hasBusiness:!1}),localStorage.removeItem("user"),null===c||void 0===c||c.resetStore(),e.history.push("/login");case 6:case"end":return t.stop()}}),t)})))},"Logout",i.a.createElement(A.a,null))},Ae=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;Object(u.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){switch(console.log("tab=====",t),n.setState({tab:t}),t){case"users":n.props.history.push("/users");break;case"posts":n.props.history.push("/posts");break;case"products":n.props.history.push("/products");break;case"carts":n.props.history.push("/carts");break;case"sales":n.props.history.push("/sales");break;default:n.props.history.push("/")}},n.handleMenu=function(e){n.props.history.push("/profile")};var r=e.location.pathname;return n.state={tab:"/"===r?"":r.replace("/","")},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.state.tab,a=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user").toString()):$(),n=a.name;return i.a.createElement("div",{className:e.root},i.a.createElement(x.a,{position:"fixed"},i.a.createElement(j.a,null,i.a.createElement(P.a,{variant:"h6",className:e.title},i.a.createElement(y.a,{value:t,onChange:this.handleChange,indicatorColor:"secondary",variant:"scrollable",scrollButtons:"auto"},i.a.createElement(I.a,{icon:i.a.createElement(O.a,null),label:"",value:"",className:e.tabItem}),"AdminUser"===a.role&&i.a.createElement(I.a,{label:"Users",value:"users",className:e.tabItem}),("AdminUser"===a.role||"BusinessUser"===a.role)&&i.a.createElement(I.a,{label:"Posts",value:"posts",className:e.tabItem}),"BusinessUser"===a.role&&i.a.createElement(I.a,{label:"Products",value:"products",className:e.tabItem}),"BusinessUser"===a.role&&i.a.createElement(I.a,{label:"Sales",value:"sales",className:e.tabItem}),"CustomerUser"===a.role&&i.a.createElement(I.a,{label:"My Carts",value:"carts",className:e.tabItem}))),!n&&i.a.createElement(i.a.Fragment,null,i.a.createElement(l.b,{to:"/login"},i.a.createElement(T.a,{style:{textTransform:"none"}},"Login")),i.a.createElement(l.b,{to:"/register"},i.a.createElement(T.a,{style:{textTransform:"none"}},"Register"))),n&&i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{"aria-label":"account of current user",onClick:this.handleMenu,color:"inherit"},i.a.createElement(R.a,null)," ",n),i.a.createElement(we,this.props)))))}}]),a}(i.a.Component),Pe=Object(v.a)((function(e){return{menuButton:{marginRight:e.spacing(0)},title:{flexGrow:1,height:35},root:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.primary},toolbar:{background:e.palette.background.primary},textColorSecondary:{color:"white"},tabItem:{width:"auto",minWidth:e.spacing(0),textTransform:"none",color:"white"}}}))(Ae),je=a(595),Te=a(570),ke=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BASE_API:"http://50.17.184.113:4000",REACT_APP_PAYPAL_AUTH_URL:"https://www.sandbox.paypal.com/signin/authorize",REACT_APP_PAYPAL_CLIENT_ID:"ASSXiwSa9I5x9KEb0gYH3nLsxXEiwNscyI-uA8QDQqur3i58Pzy9MicZRLmYaZjXu4jC310CklxGvLTD",REACT_APP_PAYPAL_SCOPE:"openid profile email address https://uri.paypal.com/services/paypalattributes",REACT_APP_PAYPAL_SECRET:"ECImpB7zi52-92bVl8Jy6MtNpG6W7M3eJKXddsc6UtC_Swh-QyMd4Yx4flXabwYz6z6mawliOk5tr3HE",REACT_APP_PAYPAL_TOKEN_URL:"https://api.sandbox.paypal.com/v1/oauth2/token",REACT_APP_PAYPAL_USER_URL:"https://api.sandbox.paypal.com/v1/identity/oauth2/userinfo?schema=paypalv1.1",REACT_APP_REDIRECT_URL:"http://50.17.184.113:3000/user/profile/",REACT_APP_REFRESH_TOKEN_LIFETIME:"1d"}),Ne=ke.REACT_APP_PAYPAL_CLIENT_ID,Ce=void 0===Ne?"AToOrRCR3xwa1hs6T5MVv9m7Xi8XCKqvXVM8rVuP1GyUqlhEJ0XZZh6zCKo2pOlosTBV_HEaoj5yVm79":Ne,$e=ke.REACT_APP_PAYPAL_SECRET,_e=void 0===$e?"ECImpB7zi52-92bVl8Jy6MtNpG6W7M3eJKXddsc6UtC_Swh-QyMd4Yx4flXabwYz6z6mawliOk5tr3HE":$e,Ue=ke.REACT_APP_REDIRECT_URL,Re=void 0===Ue?"http://localhost:3000/user/profile/":Ue,Be=ke.REACT_APP_PAYPAL_AUTH_URL,Le=void 0===Be?"https://www.sandbox.paypal.com/signin/authorize":Be,ze=ke.REACT_APP_PAYPAL_TOKEN_URL,De=void 0===ze?"https://api.sandbox.paypal.com/v1/oauth2/token":ze,Fe=ke.REACT_APP_PAYPAL_USER_URL,qe=void 0===Fe?"https://api.sandbox.paypal.com/v1/identity/oauth2/userinfo?schema=paypalv1.1":Fe,Je=ke.REACT_APP_PAYPAL_SCOPE,We=void 0===Je?"openid profile email address https://uri.paypal.com/services/paypalattributes":Je,Ve=ke.REACT_APP_BASE_API,Ye=void 0===Ve?"http://127.0.0.1:4000":Ve,Ge=(ke.REACT_APP_REFRESH_TOKEN_LIFETIME,btoa("".concat(Ce,":").concat(_e))),Me={url:Le,client_id:Ce,scope:We,responseType:"code",redirect_uri:Re},Ke=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getConnected=function(){var t=e.props,a=t.url,n=t.client_id,r=t.scope,i=t.redirect_uri,c=t.response_type,o="".concat(a,"?scope=").concat(r,"&response_type=").concat(c,"&redirect_uri=").concat(i,"&client_id=").concat(n);window.location.href=o},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.classes;return i.a.createElement(T.a,{onClick:this.getConnected,className:e.button},i.a.createElement("img",{alt:"Connect with PayPal",className:e.img,src:"https://www.paypalobjects.com/webstatic/en_US/developer/docs/login/connectwithpaypalbutton.png"}))}}]),a}(r.Component),Xe=Object(v.a)((function(e){return{button:{borderRadius:"50px"}}}))(Ke),He=a(344),Qe=a(591),Ze=a(590),et=a(592),tt=a(593),at=a(594),nt=a(345),rt=a(603),it=a(589),ct=a(408),ot=a.n(ct),st=Object(He.a)((function(e){return Object(nt.a)({root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}})})),lt=function(e){var t=st(),a=i.a.useState(!0),n=Object(E.a)(a,2),r=n[0],c=n[1];return i.a.createElement("div",{className:t.root},i.a.createElement(it.a,{in:r},i.a.createElement(rt.a,{variant:"outlined",severity:e.alertType,action:i.a.createElement(k.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){c(!1)}},i.a.createElement(ot.a,{fontSize:"inherit"}))},e.message)))},mt=a(285),ut=a.n(mt),dt=Object(He.a)({root:{maxWidth:345},media:{height:140},title:{fontSize:20},button:{float:"right",justifyItems:"flex-end"},playerWrapper:{position:"relative",paddingTop:"56.25% "},reactPlayer:{position:"absolute",top:0,left:0}});var pt=function(e){var t=dt(),a=e.url,n=e.title,c=e.isVideo,o=Object(r.useState)(!1),s=Object(E.a)(o,2),l=s[0],m=s[1],u=function(e){var t=e.split(".");return t[t.length-1]}(a),d=function(e){switch(e.toLowerCase()){case"m4v":case"avi":case"mpg":case"mp4":case"ogg":case"webm":return!0}return!1}(u);return c?i.a.createElement("div",{className:"playerWrapper"},d&&i.a.createElement(ut.a,{controls:!0,playing:l,onClick:function(){return m(!l)},className:"reactPlayer",url:[{src:a,type:"video/".concat(u)}],width:"100%",height:"100%"}),!d&&i.a.createElement(ut.a,{className:"reactPlayer",url:a,width:"100%",height:"100%"})):i.a.createElement(Ze.a,{className:t.media,image:a,title:n})},gt=function(e){var t,a=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user").toString()):$(),n=D.b(oe,t),c=Object(E.a)(n,1)[0],o=dt(),s=e.title,l=e.description,m=e.price,u=e.imageUrl,d=void 0===u?"https://via.placeholder.com/345x140.png?text=":u,p=e.checkout,g=void 0!==p&&p,f=e.isVideo,v=void 0!==f&&f,x=e.product,y=Object(r.useState)(""),I=Object(E.a)(y,2),S=I[0],O=I[1],w=Object(r.useState)("success"),A=Object(E.a)(w,2),j=A[0],k=A[1],N=function(){var e=Object(b.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{partnerId:t.partner.id,customerId:a.businessUserId,productId:t.id,name:t.name,price:t.price,description:t.description}});case 2:n=e.sent,n.data?O("Added to cart"):(O("Something error. Please try again."),k("error"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(Qe.a,{className:o.root},i.a.createElement(et.a,null,i.a.createElement(pt,{url:d,title:s,isVideo:v}),i.a.createElement(tt.a,null,S&&i.a.createElement(P.a,{gutterBottom:!0,variant:"h5",component:"h2"},i.a.createElement(lt,{message:S,alertType:j})),i.a.createElement(P.a,{gutterBottom:!0,variant:"h5",component:"h2"},i.a.createElement(Te.a,{component:"legend"},i.a.createElement("span",{className:o.title},s," "))),i.a.createElement(P.a,{variant:"body2",color:"textSecondary",component:"p"},l))),i.a.createElement(at.a,null,m&&i.a.createElement(T.a,{size:"small",variant:"outlined",color:"primary",style:{textTransform:"none"}},"Price: $"+m.toString()),g&&"CustomerUser"===a.role&&i.a.createElement(T.a,{size:"small",variant:"outlined",color:"primary",onClick:function(){return N(x)},style:{textTransform:"none"}},"Add to cart")))},ft=a(352),ht=Object(v.a)((function(e){return{app:{flexGrow:1,itemAlign:"center",background:"whitesmoke",padding:"70px",height:"100vh",width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}))((function(e){var t=e.classes,a=i.a.useState(0),n=Object(E.a)(a,2),r=n[0],c=n[1];return i.a.useEffect((function(){var e=setInterval((function(){c((function(e){return e>=100?0:e+1}))}),20);return function(){clearInterval(e)}}),[]),i.a.createElement("div",{className:t.app},i.a.createElement(T.a,{variant:"text",className:t.button,disabled:!0,style:{textTransform:"none"}},i.a.createElement(ft.a,{className:t.circularProgress,value:r,size:20}),"Loading..."))})),bt=Object(v.a)((function(){return{app:{flexGrow:1,itemAlign:"center",background:"whitesmoke",padding:"70px",height:"100vh"},postTitle:{borderBottom:"1px solid #c2c2c2",marginBottom:" 10px",fontWeight:"bold"}}}))((function(e){var t=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user").toString()):$(),a=e.classes,n=he({fetchPolicy:"network-only"}),r=ve({variables:{partnerId:t.businessUserId},fetchPolicy:"network-only"}),c=[],o=[],s=!1;n.data&&(o=n.data.posts,s=n.loading),r.data&&(c=r.data.products,s=r.loading);var l="BusinessUser"===t.role&&!t.hasBusiness;return i.a.createElement("div",{className:a.app},s&&i.a.createElement(ht,null),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"center"},i.a.createElement(je.a,{item:!0,xs:!0},l&&i.a.createElement(Xe,Me))),!s&&c.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"center",className:a.postTitle},i.a.createElement(Te.a,{component:"h4"}," Products ")),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"center"},!s&&c.map((function(e){return i.a.createElement(je.a,{item:!0,xs:3,key:e.id},i.a.createElement(gt,{product:e,key:e.id,title:e.name,price:e.price,description:e.description,checkout:!0}))})))),!s&&o.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"center",className:a.postTitle},i.a.createElement(Te.a,{component:"h4"}," Text & Videos Post ")),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"center"},o.map((function(e){return i.a.createElement(je.a,{item:!0,xs:3,key:e.id},"video"===e.postType&&i.a.createElement(gt,{key:e.id,imageUrl:e.videoUrl,title:e.title,isVideo:!0,description:e.description}),"video"!==e.postType&&i.a.createElement(gt,{key:e.id,imageUrl:e.videoUrl,title:e.title,description:e.description}))})))))})),Et=a(147),vt=a(353),xt=a(354),yt=a(604),It=a(355),St=Object(v.a)((function(e){return{app:{flexGrow:1,itemAlign:"center",background:"whitesmoke",padding:"70px",height:"100vh"},margin:{margin:2*e.spacing.unit},padding:{padding:e.spacing.unit,width:"50%",margin:"auto"},paper:{padding:e.spacing.unit,textAlign:"center",color:e.palette.text.secondary},title:{textAlign:"center",fontWeight:"bold",fontSize:20},headerTitle:{background:"white",boxShadow:"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)",marginBottom:10},radioControl:{margin:0}}}))((function(e){var t=e.classes,a=e.history,c=Se(),o=Object(E.a)(c,1)[0],s={email:"",password:"",firstName:"",lastName:"",userType:"CustomerUser"},l=Object(r.useState)(s),m=Object(E.a)(l,2),u=m[0],d=m[1],p=function(e){var t=e.target.getAttribute("id"),a=e.target.value,r=Object(n.a)({},s),i=Object.create(r);i[t]=a,d(Object(n.a)({},u,{},i))},g=function(){var e=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({variables:Object(n.a)({},u)});case 2:a.push("/login?error=Please login to continue");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(e){d(Object(n.a)({},u,{userType:e.target.value}))};return i.a.createElement("div",{className:t.app},i.a.createElement(je.a,{container:!0,spacing:8},i.a.createElement(je.a,{item:!0,xs:!0},i.a.createElement(Et.a,{className:t.padding},i.a.createElement("div",{className:t.margin},i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0},i.a.createElement(Te.a,{component:"h4"},"Register as: "),i.a.createElement(vt.a,{row:!0,"aria-label":"position",name:"position",defaultValue:"top"},i.a.createElement(xt.a,{className:t.radioControl,value:"CustomerUser",control:i.a.createElement(yt.a,{color:"primary",checked:"CustomerUser"===u.userType,onChange:f}),label:"Customer User",labelPlacement:"start"}),i.a.createElement(xt.a,{className:t.radioControl,value:"BusinessUser",control:i.a.createElement(yt.a,{color:"primary",checked:"BusinessUser"===u.userType,onChange:f}),label:"Business User",labelPlacement:"end"})))),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0},i.a.createElement(It.a,{id:"email",label:"Email",type:"email",fullWidth:!0,autoFocus:!0,required:!0,variant:"outlined",onChange:p}))),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0},i.a.createElement(It.a,{id:"password",label:"Password",type:"password",fullWidth:!0,required:!0,variant:"outlined",onChange:p}))),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0},i.a.createElement(It.a,{id:"firstName",label:"First Name",type:"text",fullWidth:!0,required:!0,variant:"outlined",onChange:p}))),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0},i.a.createElement(It.a,{id:"lastName",label:"Last Name",type:"text",fullWidth:!0,required:!0,variant:"outlined",onChange:p}))),i.a.createElement(je.a,{container:!0,justify:"flex-end",style:{marginTop:"10px"}},i.a.createElement(T.a,{variant:"outlined",color:"primary",style:{textTransform:"none"},onClick:g},"Register")))))))})),Ot=a(226),wt=a.n(Ot),At=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.columns,n=e.onAdd,r=e.onRowDelete,c=e.data;return i.a.createElement(wt.a,{style:{boxShadow:"none"},title:t,columns:a,data:c,editable:{onRowAdd:n,onRowDelete:r},options:{search:!0,addRowPosition:"first"}})}}]),a}(r.Component),Pt=[{title:"Name",field:"firstName"},{title:"Surname",field:"lastName"},{title:"Email",field:"email"}],jt=Object(v.a)((function(e){return{app:{flexGrow:1,itemAlign:"center",background:"whitesmoke",padding:"70px",height:"100vh"},margin:{margin:e.spacing.unit},padding:{padding:e.spacing.unit},paper:{padding:e.spacing.unit,textAlign:"center",color:e.palette.text.secondary},table:{boxShadow:"none"}}}))((function(e){var t,a=[],c=(t={fetchPolicy:"network-only"},D.c(Oe,t)).data;c&&(a=null===c||void 0===c?void 0:c.users.map((function(e){return{firstName:e.firstName,lastName:e.lastName,email:e.email,id:e.id}})));var o=Object(r.useState)(a),s=Object(E.a)(o,2),l=s[0],m=s[1],u=Se(),d=Object(E.a)(u,1)[0],p=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout(Object(b.a)(h.a.mark((function r(){var i;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d({variables:Object(n.a)({},t,{password:"AdminUser",userType:"AdminUser"})});case 2:(i=l.length>0?l:a).push(t),m(i),e(t);case 6:case"end":return r.stop()}}),r)}))),1e3)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=e.classes,f=l.length>0?l:a;return i.a.createElement("div",{className:g.app},i.a.createElement(je.a,{container:!0,spacing:8},i.a.createElement(je.a,{item:!0,xs:!0},i.a.createElement(Et.a,{className:g.paper},i.a.createElement(At,{title:"Users",columns:Pt,data:f,onAdd:p,onRowUpdate:function(e,t){return new Promise((function(e){setTimeout((function(){e()}),100)}))},onRowDelete:function(e){return new Promise((function(t){setTimeout((function(){var n=(l.length>0?l:a).filter((function(t){return t.email!==e.email}));m(n),t(e)}),1e3)}))}})))))})),Tt=a(146),kt=a.n(Tt),Nt=Object(v.a)((function(e){return{app:{flexGrow:1,itemAlign:"center",background:"whitesmoke",padding:"70px",height:"100vh"},margin:{margin:2*e.spacing.unit},padding:{padding:e.spacing.unit,width:"50%",margin:"auto"},paper:{padding:e.spacing.unit,textAlign:"center",color:e.palette.text.secondary},title:{textAlign:"center",fontWeight:"bold",fontSize:20},headerTitle:{background:"white",boxShadow:"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)",marginBottom:10}}}))((function(e){var t,a=kt.a.parse(e.location.search),c=e.classes,o=e.history,s=D.b(xe,t),l=Object(E.a)(s,1)[0],m={email:"",password:"",firstName:"",lastName:""},u=Object(r.useState)(m),d=Object(E.a)(u,2),p=d[0],g=d[1],f=function(e){var t=e.target.getAttribute("id"),a=e.target.value,r=Object(n.a)({},m),i=Object.create(r);i[t]=a,g(Object(n.a)({},p,{},i))},v=function(){var e=Object(b.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({variables:Object(n.a)({},p)});case 2:(t=e.sent)&&t.data&&(C(Object(n.a)({},t.data.login)),localStorage.setItem("user",JSON.stringify(t.data.login))),o.push("/");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:c.app},i.a.createElement(je.a,{container:!0,spacing:8},i.a.createElement(je.a,{item:!0,xs:!0},i.a.createElement(Et.a,{className:c.padding},i.a.createElement("div",{className:c.margin},i.a.createElement(Te.a,{component:"h4"},"Login "),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0},a.error&&i.a.createElement(lt,{alertType:"error",message:a.error}))),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0},i.a.createElement(It.a,{id:"email",label:"Email",type:"email",fullWidth:!0,autoFocus:!0,required:!0,variant:"outlined",onChange:f}))),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0},i.a.createElement(It.a,{id:"password",label:"Password",type:"password",fullWidth:!0,required:!0,variant:"outlined",onChange:f}))),i.a.createElement(je.a,{container:!0,justify:"flex-end",style:{marginTop:"10px"}},i.a.createElement(T.a,{variant:"outlined",color:"primary",style:{textTransform:"none"},onClick:v},"Login")))))))})),Ct=a(234),$t=[{title:"CreatedAt",field:"createdAt",editable:"never"},{title:"User",field:"userName",editable:"never"},{title:"PostType",field:"postType",lookup:{text:"Text",video:"Video"},initialEditValue:"text"},{title:"Title",field:"title"},{title:"Description",field:"description"},{title:"Video Url",field:"videoUrl"}],_t=Object(v.a)((function(e){return{app:{flexGrow:1,itemAlign:"center",background:"whitesmoke",padding:"70px",height:"100vh"},margin:{margin:e.spacing.unit},padding:{padding:e.spacing.unit},paper:{padding:e.spacing.unit,textAlign:"center",color:e.palette.text.secondary},table:{boxShadow:"none"}}}))((function(e){var t=$(),a=[],n=he({fetchPolicy:"network-only"}),c=n.data,o=n.loading;!o&&c&&(null===c||void 0===c||c.posts.map((function(e){a.push({id:e.id,title:e.title,postType:e.postType,description:e.description,createdAt:e.createdAt,videoUrl:e.videoUrl,userName:e.user.name})})));var s,l=Object(r.useState)(a),m=Object(E.a)(l,2),u=m[0],d=m[1],p=D.b(ge,s),g=Object(E.a)(p,1)[0],f=e.classes,v=u.length>0?u:a;return i.a.createElement("div",{className:f.app},i.a.createElement(je.a,{container:!0,spacing:8},i.a.createElement(je.a,{item:!0,xs:!0},i.a.createElement(Et.a,{className:f.paper},o&&i.a.createElement(ht,null),!o&&i.a.createElement(At,{title:"Posts",columns:$t,data:v,onAdd:function(e){return new Promise((function(n){setTimeout(Object(b.a)(h.a.mark((function r(){var i,c,o,s,l,m,p,f,b,E,v,x,y;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=e.postType,c=void 0===i?"":i,o=e.title,s=void 0===o?"":o,l=e.description,m=void 0===l?"":l,p=e.videoUrl,f=void 0===p?"":p,r.next=3,g({variables:{postType:c,title:s,description:m,videoUrl:f,userId:t.id}});case 3:b=r.sent,E=b.data,v=E.createPost,x={id:v.id,title:v.title,postType:v.postType,description:v.description,createdAt:v.createdAt,videoUrl:v.videoUrl,userName:v.user.name},y=u.length>0?u:a,d([].concat(Object(Ct.a)(y),[x])),n(x);case 10:case"end":return r.stop()}}),r)}))),1500)}))},onRowUpdate:function(e,t){return new Promise((function(n){if(n(),t){var r=u.length>0?u:a;r[r.indexOf(t)]=e,d(r)}}))},onRowDelete:function(e){return new Promise((function(t){var n=(u.length>0?u:a).filter((function(t){return t.id!==e.id}));d(n),t(e)}))}})))))})),Ut=a(414),Rt=a.n(Ut),Bt=a(287),Lt=a.n(Bt),zt=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user").toString()):$(),Dt=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0,component:"h4"},"Name: ",zt.name)),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0,component:"h4"},"Email: ",zt.email)),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0,component:"h4"},"User Role: ",zt.role)))},Ft=function(){var e,t,a=(e={variables:{id:zt.businessUserId},fetchPolicy:"network-only"},D.c(le,e)).data;return a&&(t=a.customer),t?i.a.createElement(i.a.Fragment,null,i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0,component:"h4"},"Name: ",t.name)),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0,component:"h4"},"Email: ",t.user.email))):i.a.createElement(i.a.Fragment,null)},qt=function(){var e,t,a=(e={variables:{id:zt.businessUserId},fetchPolicy:"network-only"},D.c(pe,e)).data;return a&&(t=a.partner),t?i.a.createElement(i.a.Fragment,null,i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0,component:"h4"},"Business Name: ",t.name)),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0,component:"h4"},"Personal Email: ",t.user.email)),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0,component:"h4"},"Business Emails: ",t.emails)),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0,component:"h4"},"PayPal Verified: ","true"===t.verifiedAccount?"Verified":"Not verified"))):i.a.createElement(i.a.Fragment,null)},Jt=Object(v.a)((function(e){return{app:{flexGrow:1,itemAlign:"center",background:"whitesmoke",padding:"70px",height:"100vh"},margin:{margin:2*e.spacing.unit},padding:{padding:e.spacing.unit,width:"50%",margin:"auto"},paper:{padding:e.spacing.unit,textAlign:"center",color:e.palette.text.secondary},title:{textAlign:"center",fontWeight:"bold",fontSize:20},headerTitle:{background:"white",boxShadow:"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)",marginBottom:10}}}))((function(e){var t,a=D.b(de,t),c=Object(E.a)(a,1)[0],o=Object(r.useState)({userId:"",name:"",emails:"",partnerId:"",payerId:"",clientId:"",verifiedAccount:""}),s=Object(E.a)(o,2),l=s[0],m=s[1],u=Object(r.useState)({message:"",alertType:"success"}),d=Object(E.a)(u,2),p=d[0],g=d[1],f=e.classes,v={grant_type:"authorization_code",code:kt.a.parse(e.location.search).code},x={method:"POST",headers:{Authorization:"Basic ".concat(Ge)},data:Rt.a.stringify(v),url:De},y=function(){var t=Object(b.a)(h.a.mark((function t(){var a,r,i,o,s,m,u,d,p,f,b,E,v;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l.clientId){t.next=4;break}g({alertType:"error",message:"Please enter PayPal clientID."}),t.next=24;break;case 4:return t.next=6,Lt()(x);case 6:return a=t.sent,r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer  ".concat(a.data.access_token)},url:qe},t.next=10,Lt()(r);case 10:return i=t.sent,o=i.data,s="",m=o.user_id,u=o.name,d=o.payer_id,p=o.verified_account,o.emails.map((function(e){s=s.concat(","+e.value)})),f=Object(n.a)({},l,{userId:zt.id,name:u,emails:s,partnerId:m,payerId:d,verifiedAccount:p}),t.next=18,c({variables:Object(n.a)({},f)});case 18:b=t.sent,E=b.data.createPartner,v=Object(n.a)({},zt,{hasBusiness:!0,businessUserId:E.id}),C(Object(n.a)({},v)),localStorage.setItem("user",JSON.stringify(v)),g({alertType:"success",message:"Your business profile has been updated.."});case 24:e.history.push("/products");case 25:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return i.a.createElement("div",{className:f.app},i.a.createElement(je.a,{container:!0,spacing:8},i.a.createElement(je.a,{item:!0,xs:!0},i.a.createElement(Et.a,{className:f.padding},i.a.createElement("div",{className:f.margin},i.a.createElement(Te.a,{component:"h4"},"User Profile"),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0},p.message&&i.a.createElement(lt,p))),""!==zt.businessUserId&&"BusinessUser"===zt.role&&i.a.createElement(qt,null),""!==zt.businessUserId&&"CustomerUser"===zt.role&&i.a.createElement(Ft,null),("AdminUser"===zt.role||""===zt.businessUserId&&"CustomerUser"===zt.role)&&i.a.createElement(Dt,null),""===zt.businessUserId&&"BusinessUser"===zt.role&&i.a.createElement(i.a.Fragment,null,i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},i.a.createElement(je.a,{item:!0,md:!0,sm:!0,xs:!0},i.a.createElement(It.a,{id:"clientId",label:"ClientID",type:"text",fullWidth:!0,required:!0,variant:"outlined",onChange:function(e){var t=e.target.value;m(Object(n.a)({},l,{clientId:t}))}}))),i.a.createElement(je.a,{container:!0,justify:"flex-end",style:{marginTop:"10px"}},i.a.createElement(T.a,{variant:"outlined",color:"primary",style:{textTransform:"none"},onClick:y},"Save"))))))))})),Wt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.location,n=Tt.parse(a.search).errorMessage;return i.a.createElement("div",{className:t.app},i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"center"},i.a.createElement(je.a,{item:!0,xs:!0},i.a.createElement(lt,{message:n,alertType:"error"}))),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"center"},i.a.createElement(je.a,{item:!0,xs:!0,justify:"flex-end"},i.a.createElement(l.b,{style:{float:"right"},to:"/"},"Back to home"))))}}]),a}(r.Component),Vt=Object(v.a)((function(){return{app:{flexGrow:1,itemAlign:"center",background:"whitesmoke",padding:"70px",height:"100vh"},error:{color:"red"}}}))(Wt),Yt=[{title:"CreatedAt",field:"createdAt",editable:"never"},{title:"Business Name",field:"businessName",editable:"never"},{title:"Name",field:"name"},{title:"Description",field:"description"},{title:"Price",field:"price",type:"numeric"}],Gt=Object(v.a)((function(e){return{app:{flexGrow:1,itemAlign:"center",background:"whitesmoke",padding:"70px",height:"100vh"},margin:{margin:e.spacing.unit},padding:{padding:e.spacing.unit},paper:{padding:e.spacing.unit,textAlign:"center",color:e.palette.text.secondary},table:{boxShadow:"none"}}}))((function(e){var t=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user").toString()):$(),a=[],n=ve({variables:{partnerId:t.businessUserId},fetchPolicy:"network-only"}),c=n.data,o=n.loading;!o&&c&&(null===c||void 0===c||c.products.map((function(e){a.push({id:e.id,name:e.name,price:e.price,description:e.description,createdAt:e.createdAt,businessName:e.partner.name,partner:{id:e.partner.id,clientId:e.partner.clientId,name:e.partner.name}})})));var s,l=Object(r.useState)(a),m=Object(E.a)(l,2),u=m[0],d=m[1],p=D.b(be,s),g=Object(E.a)(p,1)[0],f=e.classes,v=u.length>0?u:a;return i.a.createElement("div",{className:f.app},i.a.createElement(je.a,{container:!0,spacing:8},i.a.createElement(je.a,{item:!0,xs:!0},i.a.createElement(Et.a,{className:f.paper},o&&i.a.createElement(ht,null),!o&&i.a.createElement(At,{title:"Products",columns:Yt,data:v,onAdd:function(e){return new Promise((function(n){setTimeout(Object(b.a)(h.a.mark((function r(){var i,c,o,s,l,m,p,f,b,E,v;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=e.name,c=void 0===i?"":i,o=e.price,s=void 0===o?"":o,l=e.description,m=void 0===l?"":l,r.next=3,g({variables:{name:c,price:parseFloat(s.toString()),description:m,partnerId:t.businessUserId}});case 3:p=r.sent,f=p.data,b=f.createProduct,E={id:b.id,name:b.name,price:b.price,description:b.description,createdAt:b.createdAt,businessName:b.createdAt,partner:{id:b.partner.id,clientId:b.partner.name,name:b.partner.name}},v=u.length>0?u:a,d([].concat(Object(Ct.a)(v),[E])),n(E);case 10:case"end":return r.stop()}}),r)}))),1500)}))},onRowUpdate:function(e,t){return new Promise((function(n){if(n(),t){var r=u.length>0?u:a;r[r.indexOf(t)]=e,d(r)}}))},onRowDelete:function(e){return new Promise((function(t){var n=(u.length>0?u:a).filter((function(t){return t.id!==e.id}));d(n),t(e)}))}})))))})),Mt=a(381),Kt=a(361),Xt=a(358),Ht=a(601),Qt=a(376),Zt=a(362),ea=a(415),ta=function(e){var t=e.amount,a=e.paypalOptions,n=e.onApprove,r=e.onPaymentStart,c=e.onPaymentSuccess,o=e.onPaymentError,s=e.onPaymentCancel;return i.a.createElement(ea.PayPalButton,{paypalOptions:a,buttonStyles:{layout:"horizontal",shape:"rect",label:"pay"},onApprove:n,onPaymentStart:r,onPaymentSuccess:c,onPaymentError:o,onPaymentCancel:s,amount:t})},aa=function(e){var t=e.rows,a=e.onApprove,n=e.onPaymentStart,r=e.onPaymentSuccess,c=e.onPaymentError,o=e.onPaymentCancel,s=t[0].partner.clientId,l={clientId:void 0===s?Ce:s,intent:"capture"},m=0;return t.map((function(e){m+=e.price})),i.a.createElement(Ht.a,{component:Et.a},i.a.createElement(Mt.a,{size:"medium","aria-label":"a dense table"},i.a.createElement(Qt.a,null,i.a.createElement(Zt.a,null,i.a.createElement(Xt.a,null,"Name"),i.a.createElement(Xt.a,{align:"right"},"Price"))),i.a.createElement(Kt.a,null,t.map((function(e,t){return i.a.createElement(Zt.a,{key:t},i.a.createElement(Xt.a,null,e.name),i.a.createElement(Xt.a,{align:"right"},"$",e.price))})),i.a.createElement(Zt.a,{key:"totalRow"},i.a.createElement(Xt.a,{rowSpan:2}," "),i.a.createElement(Xt.a,{align:"right"},i.a.createElement("strong",null,"Total: $",m))),i.a.createElement(Zt.a,{key:"totalRowButton"},i.a.createElement(Xt.a,{align:"right"},i.a.createElement(ta,{amount:m,paypalOptions:l,onApprove:a,onPaymentStart:n,onPaymentSuccess:r,onPaymentError:c,onPaymentCancel:o}))))))},na=Object(v.a)((function(e){return{app:{flexGrow:1,itemAlign:"center",background:"whitesmoke",padding:"70px",height:"100vh"},margin:{margin:2*e.spacing.unit},padding:{padding:e.spacing.unit,width:"50%",margin:"auto"},paper:{padding:e.spacing.unit,textAlign:"center",color:e.palette.text.secondary},title:{textAlign:"center",fontWeight:"bold",fontSize:20},headerTitle:{background:"white",boxShadow:"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)",marginBottom:10}}}))((function(e){var t,a=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user").toString()):$(),n=D.b(me,t),r=Object(E.a)(n,1)[0],c=function(e){return D.b(se,e)}(),o=Object(E.a)(c,1)[0],s=function(e){return D.c(ce,e)}({variables:{customerId:a.businessUserId},fetchPolicy:"network-only"}),l=s.data,m=s.loading,u=function(){var t=Object(b.a)(h.a.mark((function t(a){var n,i,c,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):$(),i=[],c=[],s=0,l&&l.carts.map((function(e){c.push(e.id),i.push(e.product.id),s+=e.price})),t.next=7,r({variables:{productIds:i.join(","),customerId:n.businessUserId,name:"".concat(a.payer.name.given_name," ").concat(a.payer.name.surname),price:s,description:"Order ID: ".concat(a.id," ").concat(a.status," at ").concat(a.create_time),partnerId:a.payer.payer_id}});case 7:if(!t.sent.data){t.next=12;break}return t.next=11,o({variables:{ids:c.join(",")}});case 11:e.history.push("/");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=e.classes;return l?i.a.createElement("div",{className:d.app},i.a.createElement(je.a,{container:!0,spacing:8},i.a.createElement(je.a,{item:!0,xs:!0},m&&i.a.createElement(ht,null),i.a.createElement(Et.a,{className:d.padding},i.a.createElement("div",{className:d.margin},i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},!m&&l.carts.length>0&&i.a.createElement(aa,{rows:l.carts,onApprove:function(e,t){},onPaymentStart:function(){console.log("Payment started====")},onPaymentSuccess:u,onPaymentError:function(e){alert(e)},onPaymentCancel:function(e){}})),i.a.createElement(je.a,{container:!0,spacing:8,alignItems:"flex-end"},!m&&0===l.carts.length&&i.a.createElement(je.a,{item:!0,style:{padding:50}},"No data available."))))))):i.a.createElement(i.a.Fragment,null)})),ra=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.columns,n=e.data;return i.a.createElement(wt.a,{style:{boxShadow:"none"},title:t,columns:a,data:n,options:{search:!0}})}}]),a}(r.Component),ia=[{title:"Date",field:"createdAt"},{title:"Name",field:"name"},{title:"Amount",field:"price"},{title:"Description",field:"description"}],ca=Object(v.a)((function(e){return{app:{flexGrow:1,itemAlign:"center",background:"whitesmoke",padding:"70px",height:"100vh"},margin:{margin:e.spacing.unit},padding:{padding:e.spacing.unit},paper:{padding:e.spacing.unit,textAlign:"center",color:e.palette.text.secondary},table:{boxShadow:"none"}}}))((function(e){var t,a=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user").toString()):$(),n=(t={variables:{partnerId:a.businessUserId},fetchPolicy:"network-only"},D.c(ue,t)),r=n.data,c=n.loading,o=e.classes;return r?i.a.createElement("div",{className:o.app},i.a.createElement(je.a,{container:!0,spacing:8},i.a.createElement(je.a,{item:!0,xs:!0},c&&i.a.createElement(ht,null),i.a.createElement(Et.a,{className:o.padding},!c&&r&&i.a.createElement(ra,{title:"Sales",data:r.orders,columns:ia}))))):i.a.createElement(i.a.Fragment,null)})),oa=function(){return i.a.createElement(m.c,null,i.a.createElement(m.a,{exact:!0,path:"/",component:bt}),i.a.createElement(m.a,{exact:!0,path:"/login",component:Nt}),i.a.createElement(m.a,{exact:!0,path:"/register",component:St}),i.a.createElement(m.a,{exact:!0,path:"/users",component:jt}),i.a.createElement(m.a,{exact:!0,path:"/posts",component:_t}),i.a.createElement(m.a,{exact:!0,path:"/products",component:Gt}),i.a.createElement(m.a,{exact:!0,path:"/carts",component:na}),i.a.createElement(m.a,{exact:!0,path:"/sales",component:ca}),i.a.createElement(m.a,{exact:!0,path:"/profile",component:Jt}),i.a.createElement(m.a,{exact:!0,path:"/error",component:Vt}))},sa=function(){return Object(r.useEffect)((function(){if(localStorage.getItem("user")){var e=JSON.parse(localStorage.getItem("user").toString());C(e)}}),[]),i.a.createElement(l.a,null,i.a.createElement(m.a,{path:"/",render:function(e){return i.a.createElement(Pe,e)}}),i.a.createElement(oa,null))},la=a(280),ma=a.n(la),ua=a(209),da=Object(ua.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#fff"},error:{main:ma.a.A400},background:{default:"#fff"}}}),pa=a(55),ga=a(116),fa=a(419),ha=a(420),ba=a(418),Ea=a(43),va=a(47),xa=a(421),ya=a(416),Ia=a.n(ya);a(417).config();var Sa=new fa.a({}),Oa=new Ea.a((function(e,t){return new va.a((function(a){var n;return Promise.resolve(e).then((function(e){var t=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user").toString()):$();t.accessToken&&e.setContext({headers:{authorization:"bearer ".concat(t.accessToken)}})})).then((function(){n=t(e).subscribe({next:a.next.bind(a),error:a.error.bind(a),complete:a.complete.bind(a)})})).catch(a.error.bind(a)),function(){n&&n.unsubscribe()}}))})),wa=document.querySelector("#root"),Aa=new ga.a({link:Ea.a.from([new xa.a({accessTokenField:"accessToken",isTokenValidOrUndefined:function(){var e=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user").toString()):$();if(!e.accessToken)return localStorage.removeItem("user"),!0;try{var t=Ia()(e.accessToken).exp;return!(Date.now()>=1e3*t)}catch(a){return!1}},fetchAccessToken:function(){return fetch("".concat(Ye,"/refresh_token"),{method:"POST",credentials:"include"})},handleFetch:function(e){var t=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user").toString()):$();C(Object(n.a)({},t,{accessToken:e}))},handleError:function(e){console.warn("Your refresh token is invalid. Try to again"),console.error("err====",e),C({id:"",accessToken:"",email:"",role:"",name:"",businessUserId:"",hasBusiness:!1}),localStorage.removeItem("user")}}),Object(ba.a)((function(e){var t=e.graphQLErrors,a=e.networkError;console.log(t),console.log(a);var n,r="";void 0!==t&&(r=t[0].message,t[0].path.length>0&&(n=t[0].path[0])),void 0!==a&&(r="Network Error! Please try again"),console.log(r),console.log(n);var i="/";"login"===n?(localStorage.removeItem("user"),i="/login/?error=".concat(r)):"Not authorized!"===r?(localStorage.removeItem("user"),i="/login/?error=".concat(r," Please login to continue")):i="/error/?errorMessage=".concat(r),window.location.href=i})),Oa,new ha.a({uri:"".concat(Ye,"/graphql"),credentials:"include"})]),cache:Sa});o.a.render(i.a.createElement(s.a,{theme:da},i.a.createElement(pa.a,{client:Aa},i.a.createElement(sa,null))),wa)}},[[429,1,2]]]);
//# sourceMappingURL=main.c1a46129.chunk.js.map